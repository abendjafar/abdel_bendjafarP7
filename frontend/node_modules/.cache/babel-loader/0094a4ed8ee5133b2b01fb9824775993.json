{"ast":null,"code":"var _jsxFileName = \"/Users/abdelbendjafar/Documents/DEV/P7_Groupomania/front/src/components/Admin/Job.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Job extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Datas\n      isLoading: false,\n      userLogged: props.userLogged,\n      job: props.job,\n      // Jobs\n      addJob: false,\n      editJob: false,\n      isEdited: false,\n      // Inputs\n      // [Job, Last, Email, Password, Avatar]\n      inputValid: [true],\n      validForm: true,\n      valueJob: props.job.jobs\n    };\n    this.jobUrl = 'http://localhost:8080/api/jobs'; // Form control\n\n    this.OnClickEditJob = this.OnClickEditJob.bind(this);\n    this.OnDeleteJob = this.OnDeleteJob.bind(this);\n    this.OnChange = this.OnChange.bind(this);\n  } // Afficher/Cacher le formulaire de modification.\n\n\n  async OnClickEditJob(event) {\n    let jobId = event.target.parentNode.value;\n    if (!jobId) jobId = event.target.value;\n    const {\n      editJob,\n      isEdited,\n      valueJob\n    } = this.state;\n\n    if (editJob) {\n      if (isEdited) {\n        // Object Contient des formulaires de valeur\n        const formData = {\n          job: valueJob\n        }; // Mettre à jour la demande.\n\n        await axios.put(this.jobUrl + '/' + jobId, formData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => {\n          this.setState({\n            editJob: false\n          });\n          document.location.reload();\n        });\n      } else this.setState({\n        editJob: false\n      });\n    } else {\n      this.setState({\n        editJob: true\n      });\n    }\n  } // Suppression d'un emploi.\n\n\n  async OnDeleteJob(event) {\n    let jobId = event.target.parentNode.value;\n    if (!jobId) jobId = event.target.value;\n\n    if (window.confirm(`Vous êtes sur le point de supprimer :\\n ${jobId}\\nÊtes vous sûre ?`)) {\n      // Delete request.\n      await axios.delete(this.jobUrl + '/' + jobId, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(() => {\n        document.location.reload();\n      });\n    }\n  } // Gestion des events.\n\n\n  OnChange(event) {\n    const {\n      job\n    } = this.state;\n    const myCase = event.target.name;\n\n    switch (myCase) {\n      case 'job':\n        if (job.jobs !== event.target.value) this.setState({\n          isEdited: true\n        });else this.setState({\n          isEdited: false\n        });\n        this.checkForm(event.target);\n        this.setState({\n          valueJob: event.target.value\n        });\n        break;\n\n      default:\n        console.error('Nothing here!');\n        break;\n    }\n  } // Contrôle des champs de formulaire.\n\n\n  checkForm(target) {\n    const inputName = target.name;\n\n    switch (inputName) {\n      default:\n      case 'job':\n        if (target.value.length >= 2) {\n          // Change style\n          target.className = \"valid\";\n        } else {\n          // Change style\n          target.className = \"error\";\n        }\n\n        break;\n    }\n  }\n\n  render() {\n    const {\n      isLoading,\n      userLogged,\n      job,\n      editJob,\n      valueJob\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: !isLoading && userLogged && job ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"job\",\n        children: editJob ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"Job\",\n            children: \"Job\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"Job\",\n            name: \"job\",\n            type: \"text\",\n            placeholder: \"Emploi ?\",\n            defaultValue: valueJob,\n            onChange: this.OnChange\n          }, job.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"edit actived\",\n              \"aria-label\": \"editJob\",\n              value: job.id,\n              onClick: this.OnClickEditJob,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa-solid fa-pen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this), job.id === 1 ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete\",\n                \"aria-label\": \"delJob\",\n                value: job.id,\n                onClick: this.OnDeleteJob,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 19\n              }, this)\n            }, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: job.jobs\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"edit\",\n              \"aria-label\": \"editJob\",\n              value: job.id,\n              onClick: this.OnClickEditJob,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"hidden\",\n                children: \"edit job\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa-solid fa-pen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), job.id === 1 ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete\",\n                \"aria-label\": \"delJob\",\n                value: job.id,\n                onClick: this.OnDeleteJob,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa-solid fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)\n            }, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true)\n      }, 'Jobs-' + job.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this) : 'Error to load jobs!'\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"names":["React","axios","Job","Component","constructor","props","state","isLoading","userLogged","job","addJob","editJob","isEdited","inputValid","validForm","valueJob","jobs","jobUrl","OnClickEditJob","bind","OnDeleteJob","OnChange","event","jobId","target","parentNode","value","formData","put","headers","Authorization","sessionStorage","getItem","then","setState","document","location","reload","window","confirm","delete","myCase","name","checkForm","console","error","inputName","length","className","render","id"],"sources":["/Users/abdelbendjafar/Documents/DEV/P7_Groupomania/front/src/components/Admin/Job.js"],"sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n\nexport default class Job extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Datas\n      isLoading: false,\n      userLogged: props.userLogged,\n      job: props.job,\n      // Jobs\n      addJob: false,\n      editJob: false,\n      isEdited: false,\n      // Inputs\n      // [Job, Last, Email, Password, Avatar]\n      inputValid: [true],\n      validForm: true,\n      valueJob: props.job.jobs\n    };\n    this.jobUrl = 'http://localhost:8080/api/jobs';\n    // Form control\n    this.OnClickEditJob = this.OnClickEditJob.bind(this);\n    this.OnDeleteJob = this.OnDeleteJob.bind(this);\n    this.OnChange = this.OnChange.bind(this);\n  }\n\n  // Afficher/Cacher le formulaire de modification.\n  async OnClickEditJob(event) {\n    let jobId = event.target.parentNode.value;\n    if(!jobId) jobId = event.target.value;\n\n    const { editJob, isEdited, valueJob } = this.state;\n    if(editJob) {\n      if(isEdited) {\n        // Object Contient des formulaires de valeur\n        const formData = { job: valueJob };\n\n        // Mettre à jour la demande.\n        await axios.put(this.jobUrl+'/'+jobId, formData, {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n          }\n        }).then(() => { \n          this.setState({ editJob: false });\n          document.location.reload();\n        });\n      }\n      else this.setState({ editJob: false });\n    }\n    else {\n      this.setState({ editJob: true });\n    }\n  }\n  \n  // Suppression d'un emploi.\n  async OnDeleteJob(event) {\n    let jobId = event.target.parentNode.value;\n    if(!jobId) jobId = event.target.value;\n    if(window.confirm(`Vous êtes sur le point de supprimer :\\n ${jobId}\\nÊtes vous sûre ?`)) {\n      // Delete request.\n      await axios.delete(this.jobUrl+'/'+jobId, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      })\n      .then(() => { document.location.reload(); });\n    }\n  }\n\n  // Gestion des events.\n  OnChange(event) {\n    const { job } = this.state;\n    const myCase = event.target.name;\n    switch (myCase) {\n      case 'job':\n        if(job.jobs !== event.target.value) this.setState({ isEdited: true });\n        else this.setState({ isEdited: false });\n        this.checkForm(event.target);\n        this.setState({valueJob: event.target.value});\n        break;\n      default:\n        console.error('Nothing here!');\n        break;\n    }\n  }\n\n  // Contrôle des champs de formulaire.\n  checkForm(target) {\n    const inputName = target.name;\n    switch (inputName) {\n      default:\n      case 'job':\n        if(target.value.length >= 2 ) {\n          // Change style\n          target.className = \"valid\";\n        }\n        else {\n          // Change style\n          target.className = \"error\";\n        }\n        break;\n    }\n  }\n  \n  render() {\n    const { isLoading, userLogged, job, editJob, valueJob } = this.state;\n    return (<>\n      {!isLoading && userLogged && job ? (\n        <div className=\"job\" key={'Jobs-'+job.id}>\n          {editJob ? (<>\n\n            <label htmlFor=\"Job\">Job</label>\n            <input key={job.id} id='Job' name='job' type='text' placeholder=\"Emploi ?\"\n              defaultValue={valueJob} onChange={this.OnChange} />\n              <div>\n                <button className=\"edit actived\" aria-label=\"editJob\" value={job.id} onClick={this.OnClickEditJob}>\n                  <i className=\"fa-solid fa-pen\"></i>\n                </button>\n                {job.id === 1 ? null : (<>\n                  <button className=\"delete\" aria-label=\"delJob\" value={job.id} onClick={this.OnDeleteJob}>\n                    <i className=\"fa-solid fa-trash\"></i>\n                  </button>\n                </>)}\n              </div>\n\n          </>) : (<>\n\n            <p>{job.jobs}</p>\n            <div>\n              <button className=\"edit\" aria-label=\"editJob\" value={job.id} onClick={this.OnClickEditJob}>\n                <span className=\"hidden\">edit job</span>\n                <i className=\"fa-solid fa-pen\"></i>\n              </button>\n              {job.id === 1 ? null : (<>\n                <button className=\"delete\" aria-label=\"delJob\" value={job.id} onClick={this.OnDeleteJob}>\n                  <i className=\"fa-solid fa-trash\"></i>\n                </button>\n              </>)}\n            </div>\n\n          </>)}\n        </div>\n      ) : 'Error to load jobs!'}\n      \n    </>)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}